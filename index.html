<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë°˜ë³µ ë¶ˆë¹› ì• ë‹ˆë©”ì´ì…˜</title>
<style>
    /* CSS ìŠ¤íƒ€ì¼ì€ ì´ì „ê³¼ ë™ì¼í•©ë‹ˆë‹¤ */
    body {
        font-family: sans-serif;
        background-color: #f0f2f5;
        color: #333;
        padding: 20px;
    }
    .section {
        background-color: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h2 {
        border-bottom: 2px solid #eee;
        padding-bottom: 10px;
    }
    .light-container {
        display: flex;
        gap: 15px;
        padding: 20px 0;
    }
    .light {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: #34495e;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .light.on {
        background-color: #f1c40f;
        box-shadow: 0 0 15px #f1c40f, 0 0 25px #f1c40f;
    }
    .run-button {
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        border: none;
        background-color: #3498db;
        color: white;
        border-radius: 5px;
        transition: background-color 0.2s;
    }
    .run-button:hover {
        background-color: #2980b9;
    }
</style>
</head>
<body>

    <h1>ğŸ’¡ ë°˜ë³µ ë¶ˆë¹› ì• ë‹ˆë©”ì´ì…˜</h1>

    <div class="section">
        <h2>1. ìˆœì°¨ì ìœ¼ë¡œ ì¼œì§€ê¸° (ë°˜ë³µ)</h2>
        <div class="light-container" id="section1-lights">
            <div class="light"></div><div class="light"></div><div class="light"></div><div class="light"></div><div class="light"></div>
        </div>
        <button class="run-button" data-section="1">ì‹¤í–‰</button>
    </div>

    <div class="section">
        <h2>2. ìˆœì°¨ì ìœ¼ë¡œ ì¼œì¡Œë‹¤ êº¼ì§€ê¸° (ë°˜ë³µ)</h2>
        <div class="light-container" id="section2-lights">
            <div class="light"></div><div class="light"></div><div class="light"></div><div class="light"></div><div class="light"></div>
        </div>
        <button class="run-button" data-section="2">ì‹¤í–‰</button>
    </div>

    <div class="section">
        <h2>3. ë‹¤ìŒ ë¶ˆë¹› ì¼œì§€ë©´ ì´ì „ ë¶ˆë¹› êº¼ì§€ê¸° (ë°˜ë³µ)</h2>
        <div class="light-container" id="section3-lights">
            <div class="light"></div><div class="light"></div><div class="light"></div><div class="light"></div><div class="light"></div>
        </div>
        <button class="run-button" data-section="3">ì‹¤í–‰</button>
    </div>

    <div class="section">
        <h2>4. ëœë¤í•˜ê²Œ 0.5ì´ˆ ê¹œë¹¡ì´ê¸° (ë°˜ë³µ)</h2>
        <div class="light-container" id="section4-lights">
            <div class="light"></div><div class="light"></div><div class="light"></div><div class="light"></div><div class="light"></div>
        </div>
        <button class="run-button" data-section="4">ì‹¤í–‰</button>
    </div>

<script>
    // í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì• ë‹ˆë©”ì´ì…˜ì„ ì œì–´í•˜ê¸° ìœ„í•œ ë³€ìˆ˜ë“¤
    let activeSection = null;
    let randomBlinkInterval = null;

    // ëª¨ë“  ë²„íŠ¼ì— í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    document.querySelectorAll('.run-button').forEach(button => {
        button.addEventListener('click', handleAnimation);
    });

    // ë©”ì¸ ì»¨íŠ¸ë¡¤ í•¨ìˆ˜
    function handleAnimation(event) {
        const sectionId = event.target.dataset.section;

        // ì´ì „ì— ì‹¤í–‰ë˜ë˜ ëª¨ë“  ì• ë‹ˆë©”ì´ì…˜ì„ ì¤‘ì§€
        activeSection = null;
        clearInterval(randomBlinkInterval);
        document.querySelectorAll('.light').forEach(light => light.classList.remove('on'));
        
        // ìƒˆë¡œìš´ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ (setTimeoutìœ¼ë¡œ ì•½ê°„ì˜ ì‹œê°„ì°¨ë¥¼ ë‘¬ì„œ ì•ˆì •ì ìœ¼ë¡œ ì¤‘ì§€/ì‹œì‘)
        setTimeout(() => {
            activeSection = sectionId; // í˜„ì¬ í™œì„±í™”ëœ ì„¹ì…˜ ID ì„¤ì •
            const lights = document.querySelectorAll(`#section${sectionId}-lights .light`);
            
            switch (sectionId) {
                case '1': animateSequentialOn(lights, sectionId); break;
                case '2': animateSequentialBlink(lights, sectionId); break;
                case '3': animateCaterpillar(lights, sectionId); break;
                case '4': animateRandomBlink(lights, sectionId); break;
            }
        }, 100);
    }
    
    const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

    // 1. ìˆœì°¨ì ìœ¼ë¡œ ì¼œì§€ê¸° (ë°˜ë³µ)
    async function animateSequentialOn(lights, sectionId) {
        while (activeSection === sectionId) { // activeSectionì´ í˜„ì¬ ì„¹ì…˜ IDì™€ ì¼ì¹˜í•˜ëŠ” ë™ì•ˆ ë¬´í•œ ë°˜ë³µ
            // ìˆœì„œëŒ€ë¡œ ë¶ˆ ì¼œê¸°
            for (let i = 0; i < lights.length; i++) {
                if (activeSection !== sectionId) return; // ì¤‘ê°„ì— ë‹¤ë¥¸ ì• ë‹ˆë©”ì´ì…˜ì´ ì‹œì‘ë˜ë©´ ì¦‰ì‹œ ì¢…ë£Œ
                lights[i].classList.add('on');
                await sleep(500); // ë”œë ˆì´ ì‹œê°„ ì¦ê°€ (0.3ì´ˆ -> 0.5ì´ˆ)
            }
            await sleep(1000); // ëª¨ë‘ ì¼œì§„ ìƒíƒœë¡œ 1ì´ˆ ëŒ€ê¸°
            if (activeSection !== sectionId) return;
            // ë‹¤ìŒ ë°˜ë³µì„ ìœ„í•´ ëª¨ë“  ë¶ˆ ë„ê¸°
            lights.forEach(light => light.classList.remove('on'));
            await sleep(500); // êº¼ì§„ ìƒíƒœë¡œ 0.5ì´ˆ ëŒ€ê¸°
        }
    }

    // 2. ìˆœì°¨ì ìœ¼ë¡œ ì¼œì¡Œë‹¤ êº¼ì§€ê¸° (ë°˜ë³µ)
    async function animateSequentialBlink(lights, sectionId) {
        while (activeSection === sectionId) {
            for (let i = 0; i < lights.length; i++) {
                if (activeSection !== sectionId) return;
                lights[i].classList.add('on');
                await sleep(600); // ì¼œì§„ ì‹œê°„ ì¦ê°€ (0.4ì´ˆ -> 0.6ì´ˆ)
                if (activeSection !== sectionId) return;
                lights[i].classList.remove('on');
                await sleep(300); // êº¼ì§„ ì‹œê°„ ì¦ê°€ (0.1ì´ˆ -> 0.3ì´ˆ)
            }
            await sleep(1000); // ì „ì²´ ì‚¬ì´í´ ë°˜ë³µ ì „ 1ì´ˆ ëŒ€ê¸°
        }
    }

    // 3. ë‹¤ìŒ ë¶ˆë¹› ì¼œì§€ë©´ ì´ì „ ë¶ˆë¹› êº¼ì§€ê¸° (ë°˜ë³µ)
    async function animateCaterpillar(lights, sectionId) {
        while (activeSection === sectionId) {
            for (let i = 0; i < lights.length; i++) {
                if (activeSection !== sectionId) return;
                lights[i].classList.add('on');
                if (i > 0) {
                    lights[i - 1].classList.remove('on');
                }
                await sleep(600); // ì´ë™ ì‹œê°„ ì¦ê°€ (0.4ì´ˆ -> 0.6ì´ˆ)
            }
             // ë§ˆì§€ë§‰ ë¶ˆë¹› ë„ê¸°
            if (activeSection !== sectionId) return;
            lights[lights.length - 1].classList.remove('on');
            await sleep(1000); // ì „ì²´ ì‚¬ì´í´ ë°˜ë³µ ì „ 1ì´ˆ ëŒ€ê¸°
        }
    }

    // 4. ëœë¤í•˜ê²Œ 0.5ì´ˆ ê¹œë¹¡ì´ê¸° (ë°˜ë³µ)
    function animateRandomBlink(lights, sectionId) {
        // ê¸°ì¡´ì˜ setIntervalì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì½”ë“œëŠ” ê±°ì˜ ë™ì¼
        randomBlinkInterval = setInterval(() => {
            if (activeSection !== sectionId) {
                clearInterval(randomBlinkInterval); // ë‹¤ë¥¸ ì• ë‹ˆë©”ì´ì…˜ì´ ì‹œì‘ë˜ë©´ ë°˜ë³µ ì¤‘ë‹¨
                return;
            }
            lights.forEach(light => light.classList.remove('on'));
            const randomIndex = Math.floor(Math.random() * lights.length);
            lights[randomIndex].classList.add('on');
        }, 500);
    }
</script>
</body>
</html>
---

### ## ì£¼ìš” ë³€ê²½ì‚¬í•­ ì„¤ëª…

* **`activeSection` ë³€ìˆ˜**: í˜„ì¬ ì–´ë–¤ ì„¹ì…˜ì˜ ì• ë‹ˆë©”ì´ì…˜ì´ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì´ ë³€ìˆ˜ê°’ì´ ë°”ë€Œë©´ì„œ, ì´ì „ ì• ë‹ˆë©”ì´ì…˜ì˜ ë°˜ë³µë¬¸(`while`)ì´ ìŠ¤ìŠ¤ë¡œ ë©ˆì¶”ê²Œ ë©ë‹ˆë‹¤.
* **`while (activeSection === sectionId)`**: 1, 2, 3ë²ˆ ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜ë¥¼ `while` ë¬¸ìœ¼ë¡œ ê°ì‹¸ì„œ ë¬´í•œ ë°˜ë³µë˜ë„ë¡ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì´ ë°˜ë³µë¬¸ì€ `activeSection` ë³€ìˆ˜ê°’ì´ í˜„ì¬ ìì‹ ì˜ `sectionId`ì™€ ê°™ì„ ë•Œë§Œ ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤.
* **ë”œë ˆì´ ì‹œê°„ ì¡°ì •**: `sleep()` í•¨ìˆ˜ì— ë“¤ì–´ê°€ëŠ” ìˆ«ì(ë°€ë¦¬ì´ˆ ë‹¨ìœ„)ë¥¼ ë” í¬ê²Œ ì¡°ì •í•˜ì—¬ ì• ë‹ˆë©”ì´ì…˜ì´ ë” ì²œì²œíˆ ì§„í–‰ë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.
* **ì‚¬ì´í´ ê°„ ëŒ€ê¸°**: ê° ì• ë‹ˆë©”ì´ì…˜ì˜ í•œ ì‚¬ì´í´ì´ ëë‚˜ê³  ë‹¤ìŒ ì‚¬ì´í´ì´ ì‹œì‘ë˜ê¸° ì „ì— ì ì‹œ ëŒ€ê¸°í•˜ëŠ” ì‹œê°„(`await sleep(1000)`)ì„ ì¶”ê°€í•˜ì—¬ ë°˜ë³µë˜ëŠ” ëª¨ìŠµì„ ë” ëª…í™•í•˜ê²Œ ë³¼ ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.

ì´ì œ ì• ë‹ˆë©”ì´ì…˜ì´ ì¢€ ë” ë³´ê¸° í¸í•´ì¡Œì„ ê²ë‹ˆë‹¤. ì¶”ê°€ë¡œ ìˆ˜ì •í•˜ê³  ì‹¶ì€ ì ì´ ìˆë‹¤ë©´ í¸í•˜ê²Œ ë§ì”€í•´ì£¼ì„¸ìš”!